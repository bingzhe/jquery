<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>轮播</title>
    <link rel="stylesheet" href="style.css" media="screen" title="no title" charset="utf-8">
    <script src="../../jquery.min.js" charset="utf-8"></script>
  </head>
  <body>
    <div class="v_show">
      <div class="v_caption">
        <h2 class="cartoon" title="卡通动漫">卡通动漫</h2>
        <div class="highlight_tip">
          <span class="current">1</span><span>2</span><span>3</span><span>4</span>
        </div>
        <div class="change_btn">
          <span class="prev">上一页</span>
          <span class="next">下一页</span>
        </div>
        <em><a href="#">更多>></a></em>
      </div>

      <div class="v_content">
          <ul class="v_content_list clearfix">
            <li><ul><li><a href="#"><img src="img/04.jpg" alt="七龙珠" /></a></li><li><a href="#">七龙珠</a></li><li>播放：<em>35,264</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/04.jpg" alt="七龙珠" /></a></li><li><a href="#">七龙珠</a></li><li>播放：<em>35,264</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/04.jpg" alt="七龙珠" /></a></li><li><a href="#">七龙珠</a></li><li>播放：<em>35,264</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/04.jpg" alt="七龙珠" /></a></li><li><a href="#">七龙珠</a></li><li>播放：<em>35,264</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/01.jpg" alt="海贼王" /></a></li><li><a href="#">海贼王</a></li><li>播放：<em>28,276</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/01.jpg" alt="海贼王" /></a></li><li><a href="#">海贼王</a></li><li>播放：<em>28,276</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/01.jpg" alt="海贼王" /></a></li><li><a href="#">海贼王</a></li><li>播放：<em>28,276</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/01.jpg" alt="海贼王" /></a></li><li><a href="#">海贼王</a></li><li>播放：<em>28,276</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/02.jpg" alt="哆啦A梦" /></a></li><li><a href="#">哆啦A梦</a></li><li>播放：<em>33,326</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/02.jpg" alt="哆啦A梦" /></a></li><li><a href="#">哆啦A梦</a></li><li>播放：<em>33,326</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/02.jpg" alt="哆啦A梦" /></a></li><li><a href="#">哆啦A梦</a></li><li>播放：<em>33,326</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/02.jpg" alt="哆啦A梦" /></a></li><li><a href="#">哆啦A梦</a></li><li>播放：<em>33,326</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/03.jpg" alt="火影忍者" /></a></li><li><a href="#">火影忍者</a></li><li>播放：<em>55,432</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/03.jpg" alt="火影忍者" /></a></li><li><a href="#">火影忍者</a></li><li>播放：<em>55,432</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/03.jpg" alt="火影忍者" /></a></li><li><a href="#">火影忍者</a></li><li>播放：<em>55,432</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/03.jpg" alt="火影忍者" /></a></li><li><a href="#">火影忍者</a></li><li>播放：<em>55,432</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/04.jpg" alt="七龙珠" /></a></li><li><a href="#">七龙珠</a></li><li>播放：<em>35,264</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/04.jpg" alt="七龙珠" /></a></li><li><a href="#">七龙珠</a></li><li>播放：<em>35,264</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/04.jpg" alt="七龙珠" /></a></li><li><a href="#">七龙珠</a></li><li>播放：<em>35,264</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/04.jpg" alt="七龙珠" /></a></li><li><a href="#">七龙珠</a></li><li>播放：<em>35,264</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/01.jpg" alt="海贼王" /></a></li><li><a href="#">海贼王</a></li><li>播放：<em>28,276</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/01.jpg" alt="海贼王" /></a></li><li><a href="#">海贼王</a></li><li>播放：<em>28,276</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/01.jpg" alt="海贼王" /></a></li><li><a href="#">海贼王</a></li><li>播放：<em>28,276</em></li></ul></li>
            <li><ul><li><a href="#"><img src="img/01.jpg" alt="海贼王" /></a></li><li><a href="#">海贼王</a></li><li>播放：<em>28,276</em></li></ul></li>
          </ul>

      </div>
    </div>
    <script type="text/javascript">
      var page = 1;
      var i = 4;                                                       //每版4张图片

      var $parent = $(".v_show");
      var $v_show = $(".v_content_list");                              //找到图片展示区域
      var $v_content = $(".v_content");                                //找到图片展示区域外围的DIV

      var v_width = $v_content.width();
      var len = $v_show.children().length;                             //展示图片的个数
      var page_count = Math.ceil(len/i);                               //最大版数


      if (page == 1) {
        $v_show.animate({left:'-='+v_width},0);
        page++;
      }

      //向后按钮
      $(".next").on("click", function(){
        if (!$v_show.is(":animated")) {
          $v_show.animate({left:'-='+v_width}, 0);
          page++;
          if (page == page_count){
            $v_show.animate({left:'+='+v_width*4},0)
            page = 2;
          }
          $parent.find("span").eq((page-2)).addClass("current").siblings().removeClass("current");
        }
      });
      //向前按钮
      $(".prev").on("click", function(){
        if (!$v_show.is(":animated")) {
          $v_show.animate({left:'+='+v_width}, "normal");
          page--;
          if (page == 1) {
            $v_show.animate({left:'-='+v_width*4},0);
            page = page_count-1;
          }
          $parent.find("span").eq((page-2)).addClass("current").siblings().removeClass("current");
        }
      });
/*
      //向后
      $(".next").on("click", function(){                               //绑定事件
        var $parent = $(this).parents("div.v_show");                   //根据当前单击的元素找到父元素
        var $v_show = $parent.find("ul.v_content_list");               //找到图片内容展示区域
        var $v_content = $v_show.parent("div.v_content");              //找到图片内容展示区域外围的div

        var v_width = $v_content.width();
        var len = $v_show.children().length;                            //展示图片的个数
        var page_count = Math.ceil(len/i);                              //不是整数往最大的方向取最小的整数

        if (page == page_count) {
          $v_show.animate({left:'+='+v_width*4}, 0);
        }

        $v_show.animate()
      });

/*
        if (!$v_show.is(":animated")) {                                  //判断是不是处于动画
          if (page == page_count) {
            $v_show.animate({left:'+='+v_width*4}, 0);


            page = 1;
          } else {
            $v_show.animate({left:'-='+v_width}, "normal");               //动画换版面
            page++;
          }

          $parent.find("span").eq((page-1)).addClass("current").siblings().removeClass("current");

        }

      })
      //向前
      $(".prev").on("click", function(){                               //绑定事件
        var $parent = $(this).parents("div.v_show");                   //根据当前单击的元素找到父元素
        var $v_show = $parent.find("ul.v_content_list");               //找到图片内容展示区域
        var $v_content = $v_show.parent("div.v_content");              //找到图片内容展示区域外围的div

        var v_width = $v_content.width();
        var len = $v_show.children().length;                            //展示图片的个数
        var page_count = Math.ceil(len/i);                              //不是整数往最大的方向取最小的整数


        if (!$v_show.is(":animated")) {                                  //判断是不是处于动画
          if (page == 1) {

            $v_show.animate({left:'-='+v_width*(page_count-1)}, "normal");                      //最后一个版面，跳转到第一个版面
            page = page_count;
          } else {
            $v_show.animate({left:'+='+v_width}, "normal");               //动画换版面
            page--;
          }

          $parent.find("span").eq((page-1)).addClass("current").siblings().removeClass("current");

        }

      })
*/
    </script>
  </body>
</html>
